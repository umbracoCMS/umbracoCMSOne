@using Umbraco.Cms.Core.Models
@using Umbraco.Cms.Core.Models.Blocks
@using Umbraco.Cms.Core.Models.PublishedContent
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage

@{
    Layout = "_Layout";

    var subtitle = Model.Value<string>("subtitle") ?? "";
    var mainTitle = Model.Value<string>("mainTitle") ?? "";
    var introText = Model.Value<string>("introText") ?? "";
    var services = Model.Value<BlockListModel>("services");
    var contactHeading = Model.Value<string>("contactHeading") ?? "";
    var officeLocation = Model.Value<string>("officeLocation") ?? "";
    var phoneNumber = Model.Value<string>("phoneNumber") ?? "";
    var emailAddress = Model.Value<string>("emailAddress") ?? "";
    var contactImage = Model.Value<IPublishedContent>("contactImage");
    var contactImageUrl = contactImage?.Url() ?? "";

    var bottomImg = Model.Value<MediaWithCrops>("bottomImage");
}

<section class="services-section">
    <div class="container">

        @if (!string.IsNullOrWhiteSpace(subtitle))
        {
            <p class="services-eyebrow">@subtitle</p>
        }

        @if (!string.IsNullOrWhiteSpace(mainTitle))
        {
            <h2 class="services-title">@mainTitle</h2>
        }

        @if (!string.IsNullOrWhiteSpace(introText))
        {
            <p class="services-intro">
                @Html.Raw(introText)
            </p>
        }

        <div class="services-grid">
            @if (services != null && services.Any())
            {
                foreach (var service in services)
                {
                    var content = service.Content;
                    var title = content.Value<string>("serviceTitle") ?? "";
                    var desc = content.Value<string>("serviceDescription") ?? "";
                    var image = content.Value<IPublishedContent>("serviceImage");

                    <article class="service-card">
                        @if (image != null)
                        {
                            <img class="service-image" src="@image.Url()" alt="@title" />
                        }
                        <h3 class="service-heading">@title</h3>
                        <p class="service-desc">@desc</p>
                    </article>
                }
            }
        </div>

        @if (bottomImg != null)
        {
            <div class="services-footer-image">
                <img src="@bottomImg.Url()" alt="Services bottom image" />
            </div>
        }
    </div>
</section>
